 Rover Localization: Comparison between Bundle Adjustment-based and HiRISE Orbital Image-based Methods. R. Li, Y. Chen, S. He, L. Yang, M. Tang and the MER Science Team, Mapping and GIS Laboratory, The Ohio State University Dept. of Civil and Environmental Engineering and Geodetic Science, 470 Hitchcock Hall, 2070 Neil Ave., Columbus, OH 43210-1275 (li.282@osu.edu).   Introduction:  High precision rover traverse data are critical to Mars surface exploration. A bundle adjustment (BA)-based rover localization method has been developed and employed for the MER 2003 mission [1]. Rover positions could also be estimated by matching a ground image orthophoto to a HiRISE orthophoto. HiRISE orthophotos have been generated on Mars by both the U.S. Geological Survey [2] and the Ohio State Mapping and GIS Laboratory [3]. Furthermore, Mars Orbiter Laser Altimeter (MOLA) data are used as ground control to generate HiRISE orthophoto with a better accuracy. In this paper, we estimate the differences in traverse positions between two methods: BA-based versus HiRISE-based methods. BA-based rover localization:  There are four camera systems mounted on both of the Spirit and Opportunity rovers: Navcam (navigation camera), Pancam (panoramic camera), Hazcam (hazardavoidance camera) and MI (Microscopic Imager). A ground image network of Navcam and Hazcam images has been built for Spirit rover localization by using selected tie points and landmarks to link all available rover images (Figure 1).  Incremental bundle adjustment (BA) was applied to this image network in order to improve accuracy of both the rover positions and the orientations and errors caused by rover slips as large as 22% were corrected [1]. The BA-based rover positions, digital terrain models (DTMs) and orthophotos of the landing sites were generated using the BA-improved rover imagery. HiRISE-based rover localization:  We have developed a method to produce high-quality topographic products of the Martian surface using HiRISE cross-track stereo image pairs. For relatively short segments of the orbital trajectory, third-order polynomials can be used to model changes in the exterior orientation (EO) parameters with respect to time. The initial position and pointing angles at the start point of the orbit segment are provided in the SPICE kernels. For any given ephemeris time, the EO parameters can be retrieved by interpolating the spacecraft's trajectory and pointing vectors using SPICE kernels. The method we have developed starts with a hierarchical stereo matching process to find tie points for BA. Matching is initiated from the images of the lowest resolution; then results are transferred to the next higher level, with more interest points being extracted and matched at each level. After matching the highest resolution images, denser matched interest points are matched and selected as tie points between the stereo images. We have also developed a BA method to integrate HiRISE stereo images and MOLA data. First, a combined BA integrating MOC stereo images and simultaneously acquired MOLA data is performed [4]. It removes the inconsistencies between the two data sets and registers MOLA points to MOC stereo images. Then the same MOLA points are registered to HiRISE stereo images by manually comparing neighboring features from the MOC images. In this way, HiRISE bundle adjustment is performed with MOLA data as ground control. This BA method removes/reduces the inconsistencies between HiRISE and MOLA. Highfrequency jitters are also modeled and corrected within the software system. Finally, dense grid matching in a hierarchical structure is performed, and then 3-D ground terrain points are triangulated using bundle-adjusted EO parameters. As a result, a DTM and an orthophoto can be generated. Figure 2 shows the 3D scene generated by draping the orthophoto on the DTM.   Theoretical investigation and crosschecking with USGS products have shown that the HiRISE products thus produced have a horizontal accuracy of 0.5 m and a vertical accuracy of 1 m. The rover position can Figure 2. Spirit landing site: HiRISE orthophoto draped on corresponding DTM (height exaggerated 2 times). Rover traverse images Landmark Rover panoramic images Figure 1. BA-based rover localization. be estimated by a comparison between the rover image-derived orthophoto and the HiRISE imagederived orthophoto. Particularly, ground features such as large rocks, ridges, hills, etc. on both orthophotos are overlaid and aligned (Figure 3). After that, the rover position indicated by the rover imagederived orthophoto is used as the final rover position on the HiRISE orthophoto. Along the Opportunity traverse where BA is not performed for various reasons, this method along with BA with small image networks at some craters and integration of MOLA points are employed to finalize the rover positions.   Comparison of BA-based and HiRISE-based rov on between the two trav fference of the g images are usefu lity on r 71(1 er localization:  Due to the absence of ground control points on Mars, there is no absolute comparison. We compare the differences between the BA-based and HiRISE-based localization results at the Spirit landing site by aligning the beginnings of the two traverses and measuring the differences of other points along the traverse. The maximum difference is at the end of the traverse, at Home Plate, and is found to be about 79 m, which is then reduced by an affine transformation.  An affine transformati erses was used to model the differences; 51 control points and 21 check points were used for this transformation. These were distinct points that could be identified on both traverses (Figure 4). After the transformation, the mean di round coordinates (x, y) at the check points was 4.34 m and a maximum difference of 9.77 m. This result indicates that the relative difference is about 0.1% for the more than 7 km distance traversed from the Spirit landing center to Home Plate.  Rover tracks seen on the orbital l information. However, only recent track segments are identifiable on HiRISE orthophotos due to, for example, dust devils that would erase the tracks. In this case, as some track segments can be recognized only on the early MOC orbital images, we have transferred these early MOC segments onto the HiRISE orthophotos by identifying unique terrain features. Despite our best efforts, only part of the early traverse can be identified. On both MOC and HiRISE images, we have selected 22 visible track points to evaluate the difference between the BAbased rover traverse and the rover track identifiable on the orbital images. The average difference between these two data sets is 2.49 m (Figure 5).  More work on the impact of orbital data qua over localization and its accuracy will be performed in the future. And further comparison and analysis will be presented. HiRISE or  Ground image-derived Identified local    References:  [1] Li, R. et al. (2005), PE&RS, 0), 1129-1142. [2] Kirk, R.L. et al. (2007) LPS XXXVIII 1428. [3] Chen, Y. (2008) ISPRS XXXVII 999-1004. [4] Yoon J-S and Shan J. (2005), PE&RS, 1179-1186 Acknowledgements:  Sponsorship of this research by NASA is acknowledged.  Figure 5. BA-based localization (red line) compared to identified rover track (yellow segments). Purple dots are check points.  Figure - 3. HiRISE based rover localization. The rover ground image-derived orthophoto is overlaid onto the HiRISE orthophoto by aligning the ground features. thophotoorthophoto features  Figure 4. An affine transformation is used to reduce the difference between the BA-based (white dots) and HiRISEbased (green dots) traverses (after the correction). 
